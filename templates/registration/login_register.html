{% extends "base.html" %}
{% load static %}

{% block title %}Iniciar Sesión o Registrarse{% endblock %}

{% block content %}
    <div id="auth-container" class="auth-container
    {% if show_signup %}right-panel-active{% endif %}"
         style="margin-top: 2rem;">

        <!-- =================================== -->
        <!--     Formulario de Registro (Sign Up) -->
        <!-- =================================== -->
        <div class="form-auth-container sign-up-container">
            <form method="post">
                {% csrf_token %}
                <h2>Crear Cuenta</h2>

                {% if user_form.non_field_errors %}
                    <ul class="errorlist">{% for error in user_form.non_field_errors %}
                        <li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}

                <div class="form-field {% if user_form.username.errors %}error{% endif %}">
                    <div class="form-field-wrapper">
                        <i class="icon fas fa-user"></i>
                        {{ user_form.username }}
                    </div>
                    {% for error in user_form.username.errors %}<ul class="errorlist"><li>{{ error }}</li></ul>{% endfor %}
                </div>

                <div class="form-field {% if user_form.email.errors %}error{% endif %}">
                    <div class="form-field-wrapper">
                        <i class="icon fas fa-envelope"></i>
                        {{ user_form.email }}
                    </div>
                    {% for error in user_form.email.errors %}<ul class="errorlist"><li>{{ error }}</li></ul>{% endfor %}
                </div>

                <div class="form-field {% if user_form.password.errors %}error{% endif %}">
                    <div class="form-field-wrapper">
                        <i class="icon fas fa-lock"></i>
                        {{ user_form.password }}
                    </div>
                    {% for error in user_form.password.errors %}<ul class="errorlist"><li>{{ error }}</li></ul>{% endfor %}
                </div>

                <div class="form-field {% if user_form.password_confirm.errors %}error{% endif %}">
                    <div class="form-field-wrapper">
                        <i class="icon fas fa-check-double"></i>
                        {{ user_form.password_confirm }}
                    </div>
                    {% for error in user_form.password_confirm.errors %}<ul class="errorlist"><li>{{ error }}</li></ul>{% endfor %}
                </div>

                <button type="submit" name="signup_submit" class="btn-primary">Registrarse</button>

                <!-- CORRECCIÓN: Bloque social movido abajo -->
                <p class="social-login-divider" style="margin-top: 1.5rem;">o regístrate con</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-google"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                </div>

                <p class="mobile-switch">
                    ¿Ya tienes una cuenta? <a href="#" id="mobileSignInButton">Inicia Sesión</a>
                </p>
            </form>
        </div>

        <!-- =================================== -->
        <!--     Formulario de Login (Sign In) -->
        <!-- =================================== -->
        <div class="form-auth-container sign-in-container">
            <form method="post">
                {% csrf_token %}
                <h2>Iniciar Sesión</h2>

                {% if login_form.non_field_errors %}
                    <ul class="errorlist">{% for error in login_form.non_field_errors %}
                        <li>{{ error }}</li>{% endfor %}</ul>
                {% endif %}

                <div class="form-field {% if login_form.username.errors %}error{% endif %}">
                    <div class="form-field-wrapper">
                        <i class="icon fas fa-user"></i>
                        {{ login_form.username }}
                    </div>
                    {% for error in login_form.username.errors %}<ul class="errorlist"><li>{{ error }}</li></ul>{% endfor %}
                </div>

                <div class="form-field {% if login_form.password.errors %}error{% endif %}">
                    <div class="form-field-wrapper">
                        <i class="icon fas fa-lock"></i>
                        {{ login_form.password }}
                    </div>
                    {% for error in login_form.password.errors %}<ul class="errorlist"><li>{{ error }}</li></ul>{% endfor %}
                </div>

                <div class="forgot-password">
                    <a href="#">¿Olvidaste tu contraseña?</a>
                </div>

                <button type="submit" name="login_submit" class="btn-primary">Iniciar Sesión</button>

                <!-- CORRECCIÓN: Bloque social movido abajo -->
                <p class="social-login-divider" style="margin-top: 1.5rem;">o inicia sesión con</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-google"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                </div>

                <p class="mobile-switch">
                    ¿No tienes una cuenta? <a href="#" id="mobileSignUpButton">Regístrate</a>
                </p>
            </form>
        </div>

        <!-- =================================== -->
        <!--     Paneles de Animación (Overlay) -->
        <!-- =================================== -->
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h2>¡Bienvenido de Nuevo!</h2>
                    <p>Para seguir conectado, por favor inicia sesión con tu cuenta</p>
                    <button class="btn-secondary" id="signInButton">Iniciar Sesión</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h2>¡Hola!</h2>
                    <p>Ingresa tus datos personales y comienza tu viaje con nosotros</p>
                    <button class="btn-secondary" id="signUpButton">Registrarse</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'js/auth.js' %}"></script>

{% endblock %}